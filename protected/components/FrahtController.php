<?php/** * Controller is the customized base controller class. * All controller classes for this application should extend from this base class. */class FrahtController extends Controller{	public $pageName = 'Общая информация';	public $is_access_search = false;	public $messagesCount = 0;	public $notesCount = 0;	public $newOffersCount = 0;	public function __construct($id,$module=null)	{		parent::__construct($id,$module=null);		if(Yii::app()->user->isGuest) $this->redirect ('/main/login');		$this->user = Users::model()->findByPk(Yii::app()->user->id);		$this->is_access_search = isset($this->user->profiles->id) && isset($this->user->organizations->id);		$this->messagesCount = Messages::model()->count('receiving_user_id = ' . $this->user->id . ' AND is_deleted = 0 AND is_view = 0');		$this->notesCount = Notes::model()->count('user_id = ' . $this->user->id . ' AND is_show = 0 AND start >= CURDATE() AND start <= DATE_ADD(CURDATE(), INTERVAL 1 DAY)');//		$this->newOffersCount = Offers::model()->count('(author_id = ' . $this->user->id  . ' OR receiving_user_id = ' . $this->user->id . ') AND created_at >= ' . $this->user->last_login);	}}